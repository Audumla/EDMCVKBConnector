# VKB Server Tests - Quick Reference

## Run Tests

```bash
# All tests (unit + integration + server + dev)
test.bat all

# Just VKB server tests
test.bat server

# Just unit tests
test.bat unit

# Just integration tests
test.bat integration

# Full dev test suite
test.bat dev

# Start mock VKB server (for manual testing)
test.bat mock
```

## What's Tested

| Test | Port | Validates |
|------|------|-----------|
| Connection | 50996 | Socket connect/disconnect |
| Transmission | 50997 | Data reaches server |
| Reconnection | 50998 | Auto-reconnect on restart |
| EventHandler | 50999 | Integration end-to-end |
| Rapid Load | 51000 | 10 messages in succession |
| Timeout | 51001 | Failed connection handling |
| No Connection | 51002 | Send without connection |
| Reconnect Abort | 51003 | Disconnect during retry |

## Test Results

**Expected Output:** âœ“ All 8 tests pass in < 20 seconds

```
Test: VKBClient connects to running server
  OK: Connection test passed
Test: VKBClient sends data to server
  OK: Data transmission test passed (8 bytes received)
Test: VKBClient reconnects after server restart
  OK: Reconnection test passed
Test: EventHandler with real VKB server connection
  OK: EventHandler integration test passed (16 bytes received)
Test: Rapid message transmission
  OK: Rapid transmission test passed (10 messages sent)
Test: Connection timeout when server unavailable
  OK: Connection timeout test passed
Test: Send without connection
  OK: Send-without-connection test passed
Test: Disconnect during reconnection attempts
  OK: Disconnect-during-reconnection test passed

OK: All VKB server integration tests passed!
```

## Common Issues

| Issue | Solution |
|-------|----------|
| "Port already in use" | Close other processes on ports 50996-51003 |
| "Failed to connect" | Run `test.bat server` to run just server tests |
| Slow test | Normal - reconnection test waits for timeout |
| Unicode errors | Update Windows terminal or use WSL |

## Files

- `test_vkb_server_integration.py` - Server integration tests
- `mock_vkb_server.py` - Mock VKB hardware
- `VKB_SERVER_TESTS.md` - Full documentation
- `test.bat` - Windows test runner

## See Also

- [TESTING.md](TESTING.md) - Complete testing guide
- [README.md](test/README.md) - Testing reference
